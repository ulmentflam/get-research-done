---
phase: 14-integration-testing-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/14-integration-testing-validation/VALIDATION_CHECKLIST.md
  - scripts/verify-quick-mode.sh
  - scripts/verify-insights-mode.sh
  - scripts/verify-architect-warning.sh
autonomous: true

must_haves:
  truths:
    - "Validation checklist exists with all 5 success criteria scenarios"
    - "Verification scripts can detect Quick Explore header in DATA_REPORT.md"
    - "Verification scripts can detect Insights files presence"
    - "Scripts are executable and produce PASS/FAIL output"
  artifacts:
    - path: ".planning/phases/14-integration-testing-validation/VALIDATION_CHECKLIST.md"
      provides: "Test scenarios with setup, steps, expected results"
      contains: "Progressive Exploration Path"
    - path: "scripts/verify-quick-mode.sh"
      provides: "Quick mode header detection"
      contains: "Quick Explore Mode"
    - path: "scripts/verify-insights-mode.sh"
      provides: "Insights mode file detection"
      contains: "INSIGHTS_SUMMARY.md"
  key_links:
    - from: "VALIDATION_CHECKLIST.md"
      to: "verify-*.sh scripts"
      via: "Manual execution references scripts for automated verification"
      pattern: "verify-.*.sh"
---

<objective>
Create validation checklist and verification scripts for v1.1 workflow paths.

Purpose: Enable systematic manual testing of GRD workflow integrations with automated state verification. The checklist documents exact test scenarios from Phase 14 success criteria, and scripts automate file state checks after manual command execution.

Output:
- VALIDATION_CHECKLIST.md with 5 test scenarios covering all success criteria
- 3 verification scripts for automated state checking
</objective>

<execution_context>
@/Users/evanowen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-integration-testing-validation/14-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Validation Checklist</name>
  <files>.planning/phases/14-integration-testing-validation/VALIDATION_CHECKLIST.md</files>
  <action>
Create VALIDATION_CHECKLIST.md with 5 test scenarios matching Phase 14 success criteria:

1. **Progressive Exploration Path** (SC-1)
   - Setup: Fresh .planning/ with PROJECT.md, test data at ./data/sample.csv
   - Steps: quick-explore -> explore -> architect
   - Verify: DATA_REPORT.md transitions from Quick header to full, OBJECTIVE.md created
   - Expected: No errors, architect proceeds normally

2. **Insights Path** (SC-2)
   - Setup: Fresh .planning/, test data
   - Steps: insights -> architect
   - Verify: DATA_REPORT.md + INSIGHTS_SUMMARY.md exist, architect proceeds
   - Expected: No insufficient-data warning from architect

3. **Quick-Only Warning Path** (SC-3)
   - Setup: Fresh .planning/, test data
   - Steps: quick-explore only -> architect
   - Verify: Architect outputs warning about quick-explore data
   - Expected: Warning text appears mentioning "quick" or insufficient depth

4. **REVISE_DATA Routing** (SC-4)
   - Setup: Existing DATA_REPORT.md, OBJECTIVE.md, running experiment
   - Steps: Critic issues REVISE_DATA -> observe Explorer spawn
   - Verify: Task prompt includes "targeted re-analysis" not "quick" mode
   - Expected: Full analysis mode, not quick mode

5. **Help Documentation Coverage** (SC-5)
   - Setup: Run audit script
   - Steps: Execute scripts/audit-help-commands.sh
   - Verify: All v1.1 commands documented, no deprecated commands present
   - Expected: All PASS, no FAIL

Each scenario should have:
- **Scenario Name**: Descriptive title
- **Success Criteria Reference**: SC-N from roadmap
- **Setup**: What state to prepare
- **Steps**: Numbered execution steps
- **Verification**: What to check (manual + automated)
- **Expected Result**: What success looks like
- **Status**: [ ] Not run / [x] Pass / [!] Fail
  </action>
  <verify>File exists at .planning/phases/14-integration-testing-validation/VALIDATION_CHECKLIST.md with all 5 scenarios</verify>
  <done>VALIDATION_CHECKLIST.md contains 5 complete test scenarios with all required sections (Setup, Steps, Verification, Expected Result, Status)</done>
</task>

<task type="auto">
  <name>Task 2: Create Verification Scripts</name>
  <files>
    scripts/verify-quick-mode.sh
    scripts/verify-insights-mode.sh
    scripts/verify-architect-warning.sh
  </files>
  <action>
Create scripts/ directory if needed and add 3 verification scripts:

**scripts/verify-quick-mode.sh**
```bash
#!/bin/bash
# Verify DATA_REPORT.md contains Quick Explore Mode header
# Usage: ./scripts/verify-quick-mode.sh [path-to-data-report]

DATA_REPORT="${1:-.planning/DATA_REPORT.md}"

if [ ! -f "$DATA_REPORT" ]; then
    echo "ERROR: $DATA_REPORT not found"
    exit 1
fi

# Check for Quick Explore header in first 30 lines
if head -30 "$DATA_REPORT" | grep -qi "Quick Explore"; then
    echo "PASS: Quick Explore header found"
    exit 0
else
    echo "FAIL: Quick Explore header not found in first 30 lines"
    echo "Hint: This file may be from full explore mode"
    exit 1
fi
```

**scripts/verify-insights-mode.sh**
```bash
#!/bin/bash
# Verify Insights mode produced both output files
# Usage: ./scripts/verify-insights-mode.sh [planning-dir]

PLANNING_DIR="${1:-.planning}"

PASS=0
FAIL=0

# Check DATA_REPORT.md exists
if [ -f "$PLANNING_DIR/DATA_REPORT.md" ]; then
    echo "PASS: DATA_REPORT.md exists"
    ((PASS++))
else
    echo "FAIL: DATA_REPORT.md not found"
    ((FAIL++))
fi

# Check INSIGHTS_SUMMARY.md exists
if [ -f "$PLANNING_DIR/INSIGHTS_SUMMARY.md" ]; then
    echo "PASS: INSIGHTS_SUMMARY.md exists"
    ((PASS++))
else
    echo "FAIL: INSIGHTS_SUMMARY.md not found"
    ((FAIL++))
fi

# Check INSIGHTS_SUMMARY.md has expected sections
if [ -f "$PLANNING_DIR/INSIGHTS_SUMMARY.md" ]; then
    if grep -qi "TL;DR\|5 Things to Know\|What This Means" "$PLANNING_DIR/INSIGHTS_SUMMARY.md"; then
        echo "PASS: INSIGHTS_SUMMARY.md has expected sections"
        ((PASS++))
    else
        echo "WARN: INSIGHTS_SUMMARY.md may be missing expected sections"
    fi
fi

echo ""
echo "Summary: $PASS passed, $FAIL failed"
[ $FAIL -eq 0 ] && exit 0 || exit 1
```

**scripts/verify-architect-warning.sh**
```bash
#!/bin/bash
# Document architect warning verification (manual observation required)
# Usage: ./scripts/verify-architect-warning.sh

echo "=== Architect Warning Verification ==="
echo ""
echo "This test requires manual observation of architect output."
echo ""
echo "Test Procedure:"
echo "1. Ensure only quick-explore was run (DATA_REPORT.md has Quick header)"
echo "2. Run: /grd:architect"
echo "3. Observe output for warning about data depth"
echo ""
echo "Expected Warning Patterns (look for any of these):"
echo "  - 'Quick Explore' data may be insufficient"
echo "  - quick-explore only provides basic"
echo "  - run full /grd:explore for"
echo "  - data reconnaissance not completed"
echo "  - WARNING: No DATA_REPORT.md"
echo ""
echo "Verification:"
echo "  If warning appears: TEST PASSED"
echo "  If no warning and architect proceeds: TEST FAILED"
echo ""

# Check current DATA_REPORT.md status as helper
if [ -f ".planning/DATA_REPORT.md" ]; then
    if head -30 ".planning/DATA_REPORT.md" | grep -qi "Quick Explore"; then
        echo "Current state: DATA_REPORT.md has Quick Explore header (correct setup)"
    else
        echo "Current state: DATA_REPORT.md is NOT Quick mode (wrong setup for this test)"
    fi
else
    echo "Current state: No DATA_REPORT.md (architect will warn about missing file)"
fi
```

Make all scripts executable with chmod +x.
  </action>
  <verify>
    ls -la scripts/verify-*.sh shows 3 files with execute permission
    ./scripts/verify-quick-mode.sh --help or running without args shows usage
  </verify>
  <done>Three verification scripts exist in scripts/ directory, all executable, each produces meaningful PASS/FAIL output</done>
</task>

<task type="auto">
  <name>Task 3: Create Help Documentation Audit Script</name>
  <files>scripts/audit-help-commands.sh</files>
  <action>
Create audit script that checks help.md coverage against actual commands:

**scripts/audit-help-commands.sh**
```bash
#!/bin/bash
# Audit help.md documentation coverage
# Usage: ./scripts/audit-help-commands.sh

COMMANDS_DIR=".claude/commands/grd"
HELP_FILE="$COMMANDS_DIR/help.md"

echo "=== GRD Command Coverage Audit ==="
echo ""

# Check help.md exists
if [ ! -f "$HELP_FILE" ]; then
    echo "ERROR: $HELP_FILE not found"
    exit 1
fi

# Count actual command files (excluding help itself)
ACTUAL_COUNT=$(ls "$COMMANDS_DIR"/*.md 2>/dev/null | grep -v help.md | wc -l | tr -d ' ')
echo "Command files found: $ACTUAL_COUNT"

# Count documented commands in help.md (looking for /grd: pattern)
DOCUMENTED_COUNT=$(grep -oE '/grd:[a-z-]+' "$HELP_FILE" | sort -u | wc -l | tr -d ' ')
echo "Unique commands in help.md: $DOCUMENTED_COUNT"
echo ""

# V1.1 commands that MUST be documented
echo "=== V1.1 Command Verification ==="

V11_COMMANDS=(
    "quick-explore"
    "insights"
    "new-study"
    "complete-study"
    "scope-study"
    "plan-study"
    "run-study"
    "validate-study"
    "audit-study"
    "plan-study-gaps"
)

V11_PASS=0
V11_FAIL=0

for cmd in "${V11_COMMANDS[@]}"; do
    if grep -q "/grd:$cmd" "$HELP_FILE"; then
        echo "  [PASS] /grd:$cmd documented"
        ((V11_PASS++))
    else
        echo "  [FAIL] /grd:$cmd NOT in help.md"
        ((V11_FAIL++))
    fi
done

echo ""
echo "V1.1 commands: $V11_PASS passed, $V11_FAIL failed"
echo ""

# Deprecated commands that should NOT appear
echo "=== Deprecated Commands (should NOT appear) ==="

DEPRECATED=(
    "new-milestone"
    "complete-milestone"
    "discuss-phase"
    "execute-phase"
    "verify-work"
    "audit-milestone"
    "plan-milestone-gaps"
)

DEP_PASS=0
DEP_FAIL=0

for cmd in "${DEPRECATED[@]}"; do
    if grep -q "/grd:$cmd" "$HELP_FILE"; then
        echo "  [FAIL] /grd:$cmd still in help.md (should be removed)"
        ((DEP_FAIL++))
    else
        echo "  [PASS] /grd:$cmd not in help.md"
        ((DEP_PASS++))
    fi
done

echo ""
echo "Deprecated check: $DEP_PASS passed, $DEP_FAIL failed"
echo ""

# Command file coverage (optional - commands with files but not documented)
echo "=== Command File Coverage ==="

UNDOCUMENTED=0
for file in "$COMMANDS_DIR"/*.md; do
    [ "$file" = "$COMMANDS_DIR/help.md" ] && continue
    cmd=$(basename "$file" .md)
    if ! grep -q "/grd:$cmd" "$HELP_FILE"; then
        echo "  [WARN] $cmd has file but not documented in help.md"
        ((UNDOCUMENTED++))
    fi
done

if [ $UNDOCUMENTED -eq 0 ]; then
    echo "  All command files are documented"
fi

echo ""
echo "=== Summary ==="
TOTAL_FAIL=$((V11_FAIL + DEP_FAIL))
if [ $TOTAL_FAIL -eq 0 ]; then
    echo "AUDIT PASSED: All v1.1 commands documented, no deprecated commands found"
    exit 0
else
    echo "AUDIT FAILED: $TOTAL_FAIL issues found"
    exit 1
fi
```

Make executable with chmod +x.
  </action>
  <verify>
    ./scripts/audit-help-commands.sh runs and produces structured output with PASS/FAIL for each command
  </verify>
  <done>audit-help-commands.sh exists, is executable, audits v1.1 commands and deprecated commands, returns exit code 0 on pass, 1 on fail</done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Verify VALIDATION_CHECKLIST.md exists and has all 5 scenarios:
   ```bash
   grep -c "^## Scenario" .planning/phases/14-integration-testing-validation/VALIDATION_CHECKLIST.md
   # Should return 5
   ```

2. Verify all scripts exist and are executable:
   ```bash
   ls -la scripts/verify-*.sh scripts/audit-help-commands.sh
   # Should show 4 files with -rwx permissions
   ```

3. Run audit script to verify help.md coverage:
   ```bash
   ./scripts/audit-help-commands.sh
   # Should pass (all v1.1 commands documented)
   ```
</verification>

<success_criteria>
- [ ] VALIDATION_CHECKLIST.md contains 5 complete test scenarios
- [ ] verify-quick-mode.sh detects Quick Explore header
- [ ] verify-insights-mode.sh checks both DATA_REPORT.md and INSIGHTS_SUMMARY.md
- [ ] verify-architect-warning.sh documents manual verification procedure
- [ ] audit-help-commands.sh audits v1.1 and deprecated commands
- [ ] All scripts are executable (chmod +x applied)
- [ ] audit-help-commands.sh passes when run against current help.md
</success_criteria>

<output>
After completion, create `.planning/phases/14-integration-testing-validation/14-01-SUMMARY.md`
</output>
