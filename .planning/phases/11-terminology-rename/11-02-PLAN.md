---
phase: 11-terminology-rename
plan: 02
type: execute
wave: 2
depends_on: [11-01]
files_modified:
  - .claude/commands/grd/help.md
  - .claude/commands/grd/progress.md
  - .claude/commands/grd/settings.md
  - .claude/commands/grd/new-project.md
  - .claude/commands/grd/add-phase.md
  - .claude/commands/grd/insert-phase.md
  - .claude/commands/grd/research-phase.md
  - .claude/commands/grd/check-todos.md
  - .claude/commands/grd/debug.md
  - .claude/commands/grd/map-codebase.md
  - .claude/agents/grd-planner.md
  - .claude/agents/grd-executor.md
  - .claude/agents/grd-verifier.md
  - .claude/agents/grd-plan-checker.md
  - .claude/agents/grd-phase-researcher.md
  - .claude/agents/grd-project-researcher.md
  - .claude/agents/grd-roadmapper.md
  - .claude/agents/grd-codebase-mapper.md
  - .claude/agents/grd-debugger.md
  - .claude/get-research-done/workflows/execute-phase.md
  - .claude/get-research-done/workflows/execute-plan.md
  - .claude/get-research-done/workflows/verify-work.md
  - .claude/get-research-done/workflows/verify-phase.md
  - .claude/get-research-done/workflows/discuss-phase.md
  - .claude/get-research-done/workflows/discovery-phase.md
  - .claude/get-research-done/workflows/list-phase-assumptions.md
  - .claude/get-research-done/workflows/complete-milestone.md
  - .claude/get-research-done/workflows/resume-project.md
  - .claude/get-research-done/workflows/transition.md
  - .claude/get-research-done/workflows/diagnose-issues.md
  - .claude/get-research-done/templates/UAT.md
  - .claude/get-research-done/templates/summary.md
  - .claude/get-research-done/templates/phase-prompt.md
  - .claude/get-research-done/templates/planner-subagent-prompt.md
  - .claude/get-research-done/templates/roadmap.md
  - .claude/get-research-done/templates/discovery.md
  - .claude/get-research-done/templates/research.md
  - .claude/get-research-done/templates/milestone-archive.md
  - .claude/get-research-done/references/continuation-format.md
autonomous: true

must_haves:
  truths:
    - "All /grd: command references use new names (new-study, scope-study, etc.)"
    - "No references to old command names remain in .claude/ directory"
    - "Help documentation shows new command names"
    - "Agent prompts reference new command names"
  artifacts:
    - path: ".claude/commands/grd/help.md"
      provides: "Updated help documentation"
      contains: "grd:new-study"
    - path: ".claude/agents/grd-planner.md"
      provides: "Planner agent with updated references"
      pattern: "grd:(plan-study|run-study)"
    - path: ".claude/get-research-done/workflows/execute-phase.md"
      provides: "Execute workflow with updated references"
      pattern: "grd:(scope-study|plan-study|run-study|validate-study)"
  key_links:
    - from: "agent prompts"
      to: "renamed commands"
      via: "grd: prefixed references"
      pattern: "grd:(new-study|complete-study|scope-study|plan-study|run-study|validate-study)"
    - from: "help.md"
      to: "renamed commands"
      via: "command documentation"
      pattern: "/grd:(new-study|scope-study|plan-study|run-study)"
---

<objective>
Update all internal references from old command names to new names across agents, workflows, templates, and documentation.

Purpose: After command files are renamed (Plan 01), all references must be updated so agents and workflows invoke the correct commands. Without this, existing code would reference non-existent commands.

Output: All ~60 files updated with new command names, zero references to old names remain.
</objective>

<execution_context>
@./.claude/get-research-done/workflows/execute-plan.md
@./.claude/get-research-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-terminology-rename/11-CONTEXT.md
@.planning/phases/11-terminology-rename/11-RESEARCH.md
@.planning/phases/11-terminology-rename/11-01-SUMMARY.md

**Reference update mapping:**
| Old Reference | New Reference |
|---------------|---------------|
| `grd:new-milestone` | `grd:new-study` |
| `grd:complete-milestone` | `grd:complete-study` |
| `grd:discuss-phase` | `grd:scope-study` |
| `grd:plan-phase` | `grd:plan-study` |
| `grd:execute-phase` | `grd:run-study` |
| `grd:verify-work` | `grd:validate-study` |
| `/grd:new-milestone` | `/grd:new-study` |
| `/grd:complete-milestone` | `/grd:complete-study` |
| `/grd:discuss-phase` | `/grd:scope-study` |
| `/grd:plan-phase` | `/grd:plan-study` |
| `/grd:execute-phase` | `/grd:run-study` |
| `/grd:verify-work` | `/grd:validate-study` |
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update command references in all .claude/ files</name>
  <files>All markdown files in .claude/ directory (commands, agents, workflows, templates, references)</files>
  <action>
    Use ripgrep + perl for comprehensive find-and-replace across all markdown files.

    **Step 1: Preview files that will be modified:**
    ```bash
    rg "grd:(new-milestone|complete-milestone|discuss-phase|plan-phase|execute-phase|verify-work)" .claude --type md --files-with-matches
    ```

    **Step 2: Apply replacements using perl (portable, works on macOS):**
    ```bash
    # Replace with slash prefix (command invocations)
    rg "/grd:new-milestone" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:new-milestone|/grd:new-study|g'

    rg "/grd:complete-milestone" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:complete-milestone|/grd:complete-study|g'

    rg "/grd:discuss-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:discuss-phase|/grd:scope-study|g'

    rg "/grd:plan-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:plan-phase|/grd:plan-study|g'

    rg "/grd:execute-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:execute-phase|/grd:run-study|g'

    rg "/grd:verify-work" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|/grd:verify-work|/grd:validate-study|g'

    # Replace without slash prefix (references in text, backticks)
    rg "grd:new-milestone" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:new-milestone|grd:new-study|g'

    rg "grd:complete-milestone" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:complete-milestone|grd:complete-study|g'

    rg "grd:discuss-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:discuss-phase|grd:scope-study|g'

    rg "grd:plan-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:plan-phase|grd:plan-study|g'

    rg "grd:execute-phase" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:execute-phase|grd:run-study|g'

    rg "grd:verify-work" .claude --type md --files-with-matches -0 | \
      xargs -0 perl -i -pe 's|grd:verify-work|grd:validate-study|g'
    ```

    **Important:** Run the slash-prefixed replacements FIRST since they're more specific.
    The second pass catches any remaining references without the slash.
  </action>
  <verify>
    ```bash
    # Check for any remaining old references
    rg "grd:(new-milestone|complete-milestone|discuss-phase|plan-phase|execute-phase|verify-work)" .claude --type md --count
    # Should return nothing (0 matches)

    # Check new references exist
    rg "grd:(new-study|complete-study|scope-study|plan-study|run-study|validate-study)" .claude --type md --count | head -20
    # Should show many matches across files
    ```
  </verify>
  <done>Zero old command references remain, new references in place across all files</done>
</task>

<task type="auto">
  <name>Task 2: Update help.md command documentation</name>
  <files>.claude/commands/grd/help.md</files>
  <action>
    The bulk replacement in Task 1 handles command references. Now update the help.md to:

    1. Replace section headers and descriptions that mention old command names
    2. Update the "Core Workflow" section with new command names
    3. Update "Common Workflows" examples

    Specific changes to help.md:
    - Section "### Project Initialization" -> ensure `/grd:new-study` referenced
    - Section "### Phase Planning" -> rename to "### Study Planning"
    - Update `/grd:discuss-phase` documentation block:
      - Header: `**\`/grd:scope-study <number>\`**`
      - Description: "Scope research approach before planning"
    - Update `/grd:plan-phase` documentation block:
      - Header: `**\`/grd:plan-study <number>\`**`
      - Description: "Create detailed execution plan for a study"
    - Section "### Execution":
      - Update `/grd:execute-phase` -> `/grd:run-study`
    - Section "### Milestone Management" -> "### Study Management"
    - Update `/grd:complete-milestone` -> `/grd:complete-study`
    - Section "### User Acceptance Testing":
      - Update `/grd:verify-work` -> `/grd:validate-study`

    Also update "Quick Start" section at top and "Common Workflows" section.
  </action>
  <verify>
    ```bash
    # Check help.md has new commands
    grep -E "(new-study|scope-study|plan-study|run-study|validate-study|complete-study)" .claude/commands/grd/help.md | wc -l
    # Should be > 20

    # Check no old commands remain
    grep -E "(new-milestone|discuss-phase|plan-phase|execute-phase|verify-work|complete-milestone)" .claude/commands/grd/help.md | wc -l
    # Should be 0
    ```
  </verify>
  <done>help.md fully updated with new command names and descriptions</done>
</task>

<task type="auto">
  <name>Task 3: Commit all reference updates</name>
  <files>All modified files in .claude/</files>
  <action>
    Stage all modified files and create atomic commit:

    ```bash
    git add -u .claude/
    git commit -m "$(cat <<'EOF'
    refactor(11-02): update all command references to study-centric names

    Updated ~60 files with new command references:
    - grd:new-milestone -> grd:new-study
    - grd:complete-milestone -> grd:complete-study
    - grd:discuss-phase -> grd:scope-study
    - grd:plan-phase -> grd:plan-study
    - grd:execute-phase -> grd:run-study
    - grd:verify-work -> grd:validate-study

    Files updated:
    - All agent prompts
    - All workflow files
    - All template files
    - help.md documentation
    - Other command files with cross-references

    Co-Authored-By: Claude <noreply@anthropic.com>
    EOF
    )"
    ```

    Note: Using `git add -u .claude/` stages only modified tracked files, not new files.
    This is safe here because we're only updating existing files.
  </action>
  <verify>
    ```bash
    git log -1 --oneline
    # Should show the refactor commit

    git status --porcelain
    # Should be clean

    git diff HEAD~1 --stat | head -20
    # Should show many files changed
    ```
  </verify>
  <done>All reference updates committed as atomic unit</done>
</task>

</tasks>

<verification>
- [ ] `rg "grd:(new-milestone|complete-milestone|discuss-phase|plan-phase|execute-phase|verify-work)" .claude --count` returns 0
- [ ] `rg "grd:(new-study|complete-study|scope-study|plan-study|run-study|validate-study)" .claude --count | wc -l` shows files with new references
- [ ] help.md Quick Start section shows new command names
- [ ] help.md Common Workflows section shows new command names
- [ ] Agent prompts reference new commands (spot check grd-planner.md, grd-executor.md)
</verification>

<success_criteria>
1. Zero references to old command names in .claude/ directory
2. All ~60 affected files updated with new command references
3. help.md completely updated with new names and descriptions
4. Single atomic commit for all reference updates
</success_criteria>

<output>
After completion, create `.planning/phases/11-terminology-rename/11-02-SUMMARY.md`
</output>
