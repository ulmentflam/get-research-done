---
phase: 12-quick-explore
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/get-research-done/lib/quick.py
  - .claude/get-research-done/templates/data-report.md
autonomous: true

must_haves:
  truths:
    - "Quick explore analysis produces console output within 60 seconds for typical datasets"
    - "TL;DR summary appears at top of output"
    - "Column table shows one line per column with sparklines"
    - "Data quality issues are flagged with emoji indicators"
    - "DATA_REPORT.md template supports Quick Explore mode header"
  artifacts:
    - path: ".claude/get-research-done/lib/quick.py"
      provides: "Quick explore main analysis module"
      exports: ["quick_explore"]
      min_lines: 100
    - path: ".claude/get-research-done/templates/data-report.md"
      provides: "Updated template with Quick Explore mode support"
      contains: "Quick Explore Mode"
  key_links:
    - from: ".claude/get-research-done/lib/quick.py"
      to: ".claude/get-research-done/lib/formatters.py"
      via: "import statement"
      pattern: "from formatters import|import formatters"
---

<objective>
Implement the quick explore analysis module and update the data report template.

Purpose: Create the core analysis logic that produces fast, console-based EDA output with the formatting utilities from Plan 01.

Output:
- `quick.py` module with main quick_explore() function
- Updated `data-report.md` template with Quick Explore mode header section
</objective>

<execution_context>
@/Users/evanowen/.claude/get-research-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-research-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-quick-explore/12-CONTEXT.md
@.planning/phases/12-quick-explore/12-RESEARCH.md
@.claude/agents/grd-explorer.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create quick.py analysis module</name>
  <files>.claude/get-research-done/lib/quick.py</files>
  <action>
Create the quick.py module implementing the main quick explore workflow.

Structure the module with:

1. **Imports section:**
```python
from rich.console import Console
from rich.panel import Panel
from rich.markdown import Markdown
import pandas as pd
import numpy as np
from pathlib import Path
from datetime import datetime
from typing import Optional, Dict, Any

# Local imports (relative within lib/)
from .formatters import (
    generate_sparkline,
    get_quality_indicator,
    print_header_banner,
    print_tldr,
    print_column_table,
    print_distribution_highlights,
    print_quality_warnings,
    print_footer
)
```

2. **quick_explore(df: pd.DataFrame, target_col: str = None, output_path: str = None) -> str**
   Main function that orchestrates the quick explore workflow:

   Steps:
   a. Create Console instance
   b. Print header banner (yellow warning panel)
   c. Generate and print TL;DR prose summary
   d. Print dataset overview table (rows, columns, memory, dtypes breakdown)
   e. Print one-line-per-column summary table
   f. Print distribution highlights (skewness flags for numerical)
   g. Print data quality warnings (missing, duplicates, issues)
   h. Run basic leakage heuristics if target_col provided:
      - Correlation threshold >0.95 check (only if <50 columns)
      - Column name pattern matching (leakage_patterns list)
   i. Print suggestions section (light hints based on findings)
   j. Print footer with full explore suggestion
   k. Generate markdown output for DATA_REPORT.md
   l. Write DATA_REPORT.md if output_path provided
   m. Return markdown string

3. **generate_overview_table(df: pd.DataFrame) -> str**
   Helper to create dataset overview markdown table with:
   - Total rows, columns
   - Memory usage (MB)
   - Numeric/categorical/datetime column counts
   - Duplicate row count and percentage

4. **detect_leakage_quick(df: pd.DataFrame, target_col: str) -> list**
   Quick leakage detection using basic heuristics only:
   - High correlation threshold (>0.95) with target
   - Column name patterns suggesting leakage
   - Skip if >50 numerical columns (too slow)
   - Return list of warning dicts with feature, reason, confidence

5. **generate_suggestions(df: pd.DataFrame, issues: Dict[str, Any]) -> list**
   Generate light "Consider investigating X" style suggestions:
   - High missing columns: "Consider imputation strategy for column X"
   - High cardinality: "Column X may be ID-like, consider dropping"
   - Severe imbalance: "Class imbalance detected, consider SMOTE"
   - Outliers: "Outliers in X, consider clipping or transformation"

6. **generate_markdown_report(df, tldr, target_col, issues, leakage_warnings, suggestions) -> str**
   Generate the markdown content for DATA_REPORT.md including:
   - Quick Explore Mode header with warning
   - TL;DR section
   - Data Overview table
   - Column Summary table
   - Distribution patterns
   - Data quality issues
   - Leakage warnings (if any)
   - Suggestions
   - Footer note about running full explore

Key implementation notes:
- Analyze full data (no sampling per CONTEXT decision)
- 60-second target is soft guideline - prioritize accuracy
- On failure: show partial results + error note
- Use try-except blocks for robustness
- Print output incrementally for user feedback
  </action>
  <verify>
Module imports and main function works:
```bash
python3 -c "
from pathlib import Path
import sys
sys.path.insert(0, str(Path('.claude/get-research-done/lib')))
from quick import quick_explore
import pandas as pd
import numpy as np

# Test with simple dataframe
df = pd.DataFrame({
    'a': [1, 2, 3, np.nan, 5],
    'b': ['x', 'y', 'x', 'y', 'z'],
    'c': [1.5, 2.5, 3.5, 4.5, 5.5]
})
result = quick_explore(df)
print('OK' if 'TL;DR' in result else 'FAIL')
"
```
  </verify>
  <done>quick.py module exists with quick_explore() function that produces console output and returns markdown</done>
</task>

<task type="auto">
  <name>Task 2: Update data-report.md template for Quick Explore mode</name>
  <files>.claude/get-research-done/templates/data-report.md</files>
  <action>
Update the data-report.md template to support Quick Explore mode.

Read the existing template first, then add a conditional Quick Explore header section at the very top (after the title).

Add this section right after the title line:

```markdown
{#if mode == "quick"}
> **Quick Explore Mode**
>
> This report was generated using quick explore mode for fast data familiarization.
> For rigorous analysis with comprehensive leakage detection, run `/grd:explore`.
{#endif}
```

Since this is a template (not actual conditional rendering), add a placeholder section that the quick.py module will populate:

```markdown
# Data Report: {dataset_name}

{{mode_banner}}

**Generated:** {timestamp}
**Source:** {file_path_or_paths}
**Mode:** {mode}
**Sampling:** {sampling_note_if_applicable}
```

The `{{mode_banner}}` placeholder will be:
- For quick mode: The warning panel text
- For full mode: Empty string

Also add a new placeholder at the end of the template before the footer:

```markdown
## Analysis Notes

{{analysis_notes}}

---
```

Where `{{analysis_notes}}` will contain:
- For quick mode: "Run `/grd:explore` for complete analysis with leakage detection"
- For full mode: Empty or omitted

Keep all existing sections intact. The changes are additive.
  </action>
  <verify>
Template contains Quick Explore placeholders:
```bash
grep -q "mode_banner" .claude/get-research-done/templates/data-report.md && grep -q "Mode:" .claude/get-research-done/templates/data-report.md && echo "OK"
```
  </verify>
  <done>data-report.md template updated with mode_banner placeholder and Mode field in metadata</done>
</task>

</tasks>

<verification>
1. quick.py module exists with all helper functions
2. quick_explore() produces console output with Rich formatting
3. Returns valid markdown string
4. data-report.md template has Quick Explore mode support
5. Test dataframe produces expected output
</verification>

<success_criteria>
- [ ] quick.py module created with main quick_explore() function
- [ ] Console output includes TL;DR, column table, distribution highlights
- [ ] Basic leakage heuristics implemented
- [ ] Suggestions generated based on findings
- [ ] data-report.md template updated with mode support
- [ ] Module test passes with sample dataframe
</success_criteria>

<output>
After completion, create `.planning/phases/12-quick-explore/12-02-SUMMARY.md`
</output>
