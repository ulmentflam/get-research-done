---
phase: 01-core-orchestration-branding
plan: 04
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - hooks/grd-statusline.js
  - hooks/grd-check-update.js
  - scripts/build-hooks.js
autonomous: true

must_haves:
  truths:
    - "Hook files reference grd-* naming convention"
    - "Statusline hook reads from get-research-done paths"
    - "Update check hook checks get-research-done package"
    - "Build script outputs to hooks/dist/ with grd-* names"
  artifacts:
    - path: "hooks/grd-statusline.js"
      provides: "Renamed statusline hook source"
      contains: "get-research-done"
    - path: "hooks/grd-check-update.js"
      provides: "Renamed update check hook source"
      contains: "get-research-done"
    - path: "scripts/build-hooks.js"
      provides: "Updated build script"
      contains: "grd-"
  key_links:
    - from: "hooks/grd-statusline.js"
      to: "~/.claude/get-research-done/"
      via: "file path construction"
      pattern: "get-research-done"
    - from: "scripts/build-hooks.js"
      to: "hooks/dist/"
      via: "esbuild output"
      pattern: "grd-.*\\.js"
---

<objective>
Update hook source files and build scripts with GRD references

Purpose: Hooks are the runtime components that run inside Claude Code. They need to reference the new GRD paths and package names for the statusline and update checking to work correctly.

Output: Updated hook source files and build script ready to compile to hooks/dist/
</objective>

<execution_context>
@/Users/evanowen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-orchestration-branding/01-RESEARCH.md
@.planning/phases/01-core-orchestration-branding/01-01-SUMMARY.md
@hooks/grd-statusline.js
@hooks/grd-check-update.js
@scripts/build-hooks.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update statusline hook</name>
  <files>hooks/grd-statusline.js</files>
  <action>
Update the statusline hook to use GRD naming:

1. Read current file content to understand all GSD references

2. Update all path references from get-shit-done to get-research-done:
   - ~/.claude/get-shit-done/ -> ~/.claude/get-research-done/
   - Any other path constructions using the old name

3. Update any GSD/gsd text references:
   - Display text that shows "GSD" -> "GRD"
   - Variable names (if they contain gsd) - maintain if internal, update if user-facing
   - Comments referencing GSD -> GRD

4. Update package name references:
   - "get-shit-done-cc" -> "get-research-done"

5. Update cache file paths if any:
   - gsd-* cache files -> grd-* cache files

6. Verify syntax:
   ```bash
   node -c hooks/grd-statusline.js
   ```
  </action>
  <verify>
    - `node -c hooks/grd-statusline.js` exits with 0
    - `grep -c "get-shit-done" hooks/grd-statusline.js` returns 0
    - `grep "get-research-done" hooks/grd-statusline.js` returns matches
  </verify>
  <done>
    Statusline hook uses GRD paths and naming throughout
  </done>
</task>

<task type="auto">
  <name>Task 2: Update check-update hook</name>
  <files>hooks/grd-check-update.js</files>
  <action>
Update the update-check hook to use GRD naming:

1. Read current file to understand all GSD references

2. Update npm package name reference:
   - `npm view get-shit-done-cc version` -> `npm view get-research-done version`

3. Update cache file paths:
   - gsd-update-check.json -> grd-update-check.json (if applicable)
   - ~/.claude/cache/gsd-* -> ~/.claude/cache/grd-*

4. Update any directory path references:
   - get-shit-done -> get-research-done

5. Update VERSION file path if it references package directory

6. Verify syntax:
   ```bash
   node -c hooks/grd-check-update.js
   ```
  </action>
  <verify>
    - `node -c hooks/grd-check-update.js` exits with 0
    - `grep -c "get-shit-done" hooks/grd-check-update.js` returns 0
    - `grep "get-research-done" hooks/grd-check-update.js` returns matches
  </verify>
  <done>
    Update-check hook queries correct npm package name
  </done>
</task>

<task type="auto">
  <name>Task 3: Update build script and commit</name>
  <files>scripts/build-hooks.js</files>
  <action>
Update the hook build script:

1. Read scripts/build-hooks.js to understand current structure

2. Update source file references:
   - gsd-statusline.js -> grd-statusline.js
   - gsd-check-update.js -> grd-check-update.js

3. Update output file names in dist/:
   - hooks/dist/gsd-*.js -> hooks/dist/grd-*.js

4. Update any comments or documentation within the script

5. Verify syntax:
   ```bash
   node -c scripts/build-hooks.js
   ```

6. Run build to verify it works:
   ```bash
   npm run build:hooks
   ```

7. Verify output files exist:
   ```bash
   ls -la hooks/dist/grd-*.js
   ```

8. Stage and commit:
   ```bash
   git add hooks/grd-*.js scripts/build-hooks.js hooks/dist/
   git commit -m "refactor(01-04): update hooks and build script for GRD

   - Update grd-statusline.js paths to get-research-done
   - Update grd-check-update.js to check get-research-done package
   - Update build-hooks.js to output grd-*.js files
   - Rebuild hooks/dist/ with new file names

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
   ```
  </action>
  <verify>
    - `ls hooks/dist/grd-*.js | wc -l` returns 2
    - `node -c scripts/build-hooks.js` exits with 0
    - `grep -c "get-shit-done\|gsd-" scripts/build-hooks.js` returns 0
  </verify>
  <done>
    Build script produces grd-*.js hooks in dist/ directory
  </done>
</task>

</tasks>

<verification>
Run verification commands:

```bash
# Verify no old references in hook sources
echo "Old references in hooks (should be 0):"
grep -c "get-shit-done\|gsd-" hooks/grd-*.js 2>/dev/null | paste -sd+ - | bc || echo 0

# Verify no old references in build script
echo "Old references in build script (should be 0):"
grep -c "get-shit-done\|gsd-" scripts/build-hooks.js 2>/dev/null || echo 0

# Verify JavaScript syntax
echo "Syntax check:"
node -c hooks/grd-statusline.js && echo "statusline: OK" || echo "statusline: FAIL"
node -c hooks/grd-check-update.js && echo "check-update: OK" || echo "check-update: FAIL"
node -c scripts/build-hooks.js && echo "build-hooks: OK" || echo "build-hooks: FAIL"

# Verify dist files exist
echo "Dist files:"
ls hooks/dist/grd-*.js 2>/dev/null || echo "No dist files found"
```
</verification>

<success_criteria>
- hooks/grd-statusline.js references get-research-done paths
- hooks/grd-check-update.js checks get-research-done npm package
- scripts/build-hooks.js builds grd-*.js output files
- hooks/dist/ contains grd-statusline.js and grd-check-update.js
- All JavaScript files pass syntax validation
- No references to get-shit-done or gsd- remain
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-orchestration-branding/01-04-SUMMARY.md`
</output>
