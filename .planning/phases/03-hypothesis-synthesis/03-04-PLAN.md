---
phase: 03-hypothesis-synthesis
plan: 04
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can run /grd:architect and receive hypothesis proposal"
    - "Architect generates valid OBJECTIVE.md with all sections"
    - "Baseline warning appears when baselines not defined"
    - "Validation catches invalid metric weights"
  artifacts:
    - path: ".planning/OBJECTIVE.md"
      provides: "Generated hypothesis document (test artifact)"
      min_lines: 50
  key_links:
    - from: "commands/grd/architect.md"
      to: "agents/grd-architect.md"
      via: "subagent spawn"
      pattern: "grd-architect"
    - from: "agents/grd-architect.md"
      to: ".planning/OBJECTIVE.md"
      via: "file generation"
      pattern: "Write.*OBJECTIVE"
---

<objective>
Verify the complete /grd:architect workflow functions correctly end-to-end.

Purpose: Validate that all Phase 3 components work together - command spawns agent, agent proposes hypothesis, user can refine, validation catches issues, OBJECTIVE.md is generated correctly.

Output: Verified workflow, human approval checkpoint
</objective>

<execution_context>
@/Users/evanowen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-hypothesis-synthesis/03-01-SUMMARY.md
@.planning/phases/03-hypothesis-synthesis/03-02-SUMMARY.md
@.planning/phases/03-hypothesis-synthesis/03-03-SUMMARY.md

# Verify these files exist and work together
@commands/grd/architect.md
@agents/grd-architect.md
@get-research-done/templates/objective.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify file structure and references</name>
  <files></files>
  <action>
Verify all Phase 3 artifacts exist and reference each other correctly.

**Check file existence:**
```bash
# Template
ls get-research-done/templates/objective.md

# Command
ls commands/grd/architect.md

# Agent
ls agents/grd-architect.md
```

**Verify command references agent:**
```bash
grep "grd-architect" commands/grd/architect.md
```

**Verify agent references template:**
```bash
grep "templates/objective.md" agents/grd-architect.md
```

**Verify command has no placeholders:**
```bash
grep -c "PLACEHOLDER" commands/grd/architect.md  # Should be 0
```

**Check template has required sections:**
```bash
grep "^## " get-research-done/templates/objective.md
# Should include: Context, Hypothesis, Success Metrics, Evaluation, Baselines, Falsification
```

**Check agent has all 8 steps:**
```bash
grep "^## Step" agents/grd-architect.md
# Should have Steps 1-8
```
  </action>
  <verify>
All files exist and reference each other correctly. No broken references.
  </verify>
  <done>
File structure verified:
- Template exists with all required sections
- Command exists without placeholders, references agent
- Agent exists with 8-step workflow, references template
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify validation logic</name>
  <files></files>
  <action>
Verify validation logic is present in agent.

**Check metric weight validation:**
```bash
grep -A5 "validate_metric_weights\|weight.*sum" agents/grd-architect.md
```

**Check baseline soft gate:**
```bash
grep -A5 "baseline.*soft.gate\|WARNING.*baseline\|check_baseline" agents/grd-architect.md
```

**Check evaluation validation:**
```bash
grep "time-series-split\|stratified" agents/grd-architect.md
```

**Check falsification validation:**
```bash
grep "unfalsifiable\|falsification.*criteria" agents/grd-architect.md
```

**Check data constraints integration:**
```bash
grep "DATA_REPORT.md\|extract_data\|leakage" agents/grd-architect.md
```
  </action>
  <verify>
All validation logic present:
- Metric weight sum validation
- Baseline soft gate (warning, not error)
- Evaluation methodology validation
- Falsification criteria validation
- Data constraints integration
  </verify>
  <done>
Validation logic verified:
- Weights validated to sum to 1.0
- Baseline warning issued when missing (soft gate)
- Evaluation methodology checked for task type
- Falsification criteria checked for meaningfulness
- DATA_REPORT.md characteristics integrated
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 3 Hypothesis Synthesis workflow:
- /grd:architect command (entry point)
- grd-architect agent (conversational hypothesis synthesis)
- OBJECTIVE.md template (structured hypothesis documentation)
- Validation logic (metric weights, evaluation, baseline soft gate)
  </what-built>
  <how-to-verify>
1. Review the three main artifacts:
   - `commands/grd/architect.md` - Command entry point
   - `agents/grd-architect.md` - Agent with 8-step workflow
   - `get-research-done/templates/objective.md` - OBJECTIVE.md template

2. Verify key features are present:
   - [ ] Command has soft gate for DATA_REPORT.md (warn if missing)
   - [ ] Command supports both auto-propose and user-directed modes
   - [ ] Agent has iterative refinement loop (max 15 iterations)
   - [ ] Agent validates metric weights sum to 1.0
   - [ ] Agent has baseline soft gate (warns but allows proceeding)
   - [ ] Template has all required sections (Context, Hypothesis, Metrics, Evaluation, Baselines, Falsification)

3. Check alignment with CONTEXT.md decisions:
   - [ ] Flexible prose format (not rigid scientific template)
   - [ ] Weighted metrics with composite scoring
   - [ ] Evaluation methodology required upfront
   - [ ] Baseline warning but not blocking
   - [ ] Falsification criteria required

4. Check alignment with RESEARCH.md recommendations:
   - [ ] Iterative conversational refinement pattern
   - [ ] OBJECTIVE.md schema with validation
   - [ ] Baseline warning system
   - [ ] Data constraints integration
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 3, or describe issues to address</resume-signal>
</task>

</tasks>

<verification>
- [ ] All Phase 3 files exist and are properly wired
- [ ] Validation logic is comprehensive
- [ ] Human verification confirms workflow is complete
- [ ] All requirements (HYPO-01 through HYPO-04) are satisfied
</verification>

<success_criteria>
Phase 3 complete when:
1. /grd:architect command can be invoked
2. grd-architect agent proposes and refines hypotheses
3. OBJECTIVE.md is generated with all required sections
4. Validation catches errors and issues warnings appropriately
5. Baseline soft gate works (warns but doesn't block)
6. Human approves the workflow
</success_criteria>

<output>
After completion, create `.planning/phases/03-hypothesis-synthesis/03-04-SUMMARY.md`
</output>
