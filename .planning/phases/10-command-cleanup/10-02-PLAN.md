---
phase: 10-command-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/commands/grd/complete-milestone.md
  - .claude/commands/grd/verify-work.md
  - .claude/commands/grd/execute-phase.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "No workflow command references deleted audit-milestone command"
    - "No workflow command references deleted plan-milestone-gaps command"
    - "Workflow routing still provides sensible next steps"
  artifacts:
    - path: ".claude/commands/grd/complete-milestone.md"
      provides: "Milestone completion workflow"
      contains: "No audit-milestone or plan-milestone-gaps references"
    - path: ".claude/commands/grd/verify-work.md"
      provides: "Work verification workflow"
      contains: "No audit-milestone references"
    - path: ".claude/commands/grd/execute-phase.md"
      provides: "Phase execution workflow"
      contains: "No audit-milestone references"
  key_links:
    - from: "complete-milestone.md"
      to: "Existing commands only"
      via: "Workflow routing"
      pattern: "No /grd:audit-milestone or /grd:plan-milestone-gaps"
    - from: "verify-work.md"
      to: "Existing commands only"
      via: "Route B offer_next"
      pattern: "No /grd:audit-milestone"
    - from: "execute-phase.md"
      to: "Existing commands only"
      via: "Route B offer_next"
      pattern: "No /grd:audit-milestone"
---

<objective>
Remove references to deleted commands (audit-milestone, plan-milestone-gaps) from workflow command files that were missed in plan 10-01.

Purpose: Close verification gaps - the deleted commands are still referenced in workflow routing sections, which would direct users to run commands that no longer exist.

Output: Three workflow files updated with references removed, routing logic adjusted to skip audit step.
</objective>

<execution_context>
@/Users/evanowen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/10-command-cleanup/10-VERIFICATION.md
@.planning/phases/10-command-cleanup/10-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove audit references from complete-milestone.md</name>
  <files>.claude/commands/grd/complete-milestone.md</files>
  <action>
    Remove the pre-flight audit check section (step 0) from complete-milestone.md.

    The section to remove is lines 42-62 which contain:
    - Step "0. Check for audit:" header
    - Logic checking for v{{version}}-MILESTONE-AUDIT.md
    - Recommendation to run /grd:audit-milestone
    - Recommendation to run /grd:plan-milestone-gaps
    - The entire "Pre-flight Check" markdown block

    **What to do:**
    1. Remove lines 42-62 entirely (the whole step 0 section including the markdown block)
    2. Renumber subsequent steps: "1. Verify readiness" becomes the first step
    3. Keep all other content intact

    **Why remove entirely vs update:** The audit-milestone and plan-milestone-gaps commands no longer exist. Rather than pointing to a non-existent step, the workflow should start directly with "Verify readiness" which checks that all phases have SUMMARY.md files - sufficient validation for milestone completion.
  </action>
  <verify>
    Run: grep -c "audit-milestone\|plan-milestone-gaps" .claude/commands/grd/complete-milestone.md
    Expected: 0 (no references remain)

    Run: grep -n "Verify readiness" .claude/commands/grd/complete-milestone.md
    Expected: Shows "1. **Verify readiness:**" as first step in process
  </verify>
  <done>
    Pre-flight audit check section removed from complete-milestone.md. "Verify readiness" is now step 1.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Route B in verify-work.md</name>
  <files>.claude/commands/grd/verify-work.md</files>
  <action>
    Update Route B (milestone complete route) in verify-work.md to remove audit-milestone recommendation.

    **Current Route B section (lines 107-133) recommends:**
    - Primary: /grd:audit-milestone (DELETED - must remove)
    - Alternative: /grd:complete-milestone (EXISTS - keep as primary)

    **Change to:**
    Replace the "Next Up" section to recommend complete-milestone directly:

    ```
    ## ▶ Next Up

    **Archive milestone** — create historical record and prepare for next version

    /grd:complete-milestone

    <sub>/clear first → fresh context window</sub>

    ───────────────────────────────────────────────────────────────

    **Also available:**
    - /grd:new-milestone — start fresh milestone (if not archiving yet)

    ───────────────────────────────────────────────────────────────
    ```

    **Why this change:** Without audit-milestone, the natural next step after verifying the final phase is to complete/archive the milestone. The new-milestone option provides an alternative if user wants to skip archiving.
  </action>
  <verify>
    Run: grep -c "audit-milestone" .claude/commands/grd/verify-work.md
    Expected: 0 (no references remain)

    Run: grep -A2 "Route B:" .claude/commands/grd/verify-work.md
    Expected: Shows "All tests pass, milestone complete" (header unchanged)
  </verify>
  <done>
    Route B in verify-work.md now recommends /grd:complete-milestone as primary action.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Route B in execute-phase.md</name>
  <files>.claude/commands/grd/execute-phase.md</files>
  <action>
    Update Route B (milestone complete route) in execute-phase.md to remove audit-milestone recommendation.

    **Current Route B section (lines 179-206) recommends:**
    - Primary: /grd:audit-milestone (DELETED - must remove)
    - Alternative: /grd:verify-work, /grd:complete-milestone (EXIST - keep)

    **Change to:**
    Replace the "Next Up" section to recommend complete-milestone directly:

    ```
    ## ▶ Next Up

    **Archive milestone** — create historical record and prepare for next version

    /grd:complete-milestone

    <sub>/clear first → fresh context window</sub>

    ───────────────────────────────────────────────────────────────

    **Also available:**
    - /grd:verify-work — manual acceptance testing before archiving
    - /grd:new-milestone — start fresh milestone (if not archiving yet)

    ───────────────────────────────────────────────────────────────
    ```

    **Why this change:** Without audit-milestone, completing the milestone is the natural next step. verify-work remains available for additional manual testing, and new-milestone provides a path to skip archiving.
  </action>
  <verify>
    Run: grep -c "audit-milestone" .claude/commands/grd/execute-phase.md
    Expected: 0 (no references remain)

    Run: grep -A2 "Route B:" .claude/commands/grd/execute-phase.md
    Expected: Shows "Phase verified, milestone complete" (header unchanged)
  </verify>
  <done>
    Route B in execute-phase.md now recommends /grd:complete-milestone as primary action.
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify phase success criteria from VERIFICATION.md gaps:

1. No references to deleted commands in any workflow file:
   ```bash
   grep -r "audit-milestone\|plan-milestone-gaps" .claude/commands/grd/
   ```
   Expected: No output (empty)

2. Workflow routing still sensible:
   - complete-milestone.md starts with "Verify readiness" step
   - verify-work.md Route B offers /grd:complete-milestone
   - execute-phase.md Route B offers /grd:complete-milestone

3. File count unchanged:
   ```bash
   ls -1 .claude/commands/grd/*.md | wc -l
   ```
   Expected: 30 (no files added or removed)
</verification>

<success_criteria>
- [ ] complete-milestone.md has no audit-milestone or plan-milestone-gaps references
- [ ] verify-work.md has no audit-milestone references
- [ ] execute-phase.md has no audit-milestone references
- [ ] All workflow routes provide sensible next steps to existing commands
- [ ] Zero grep matches for deleted command names across all .claude/commands/grd/*.md files
</success_criteria>

<output>
After completion, create `.planning/phases/10-command-cleanup/10-02-SUMMARY.md`
</output>
