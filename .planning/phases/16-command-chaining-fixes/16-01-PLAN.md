---
phase: 16-command-chaining-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - commands/grd/run-experiment.md
  - commands/grd/validate-results.md
  - commands/grd/progress.md
autonomous: true

must_haves:
  truths:
    - "run-experiment routes to audit-study (not audit-milestone) on milestone complete"
    - "validate-results routes to audit-study (not audit-milestone) on milestone complete"
    - "progress routes to complete-study (not complete-milestone) when milestone complete"
    - "progress routes to new-study (not new-milestone) between milestones"
  artifacts:
    - path: "commands/grd/run-experiment.md"
      provides: "Correct study terminology in offer_next"
      contains: "audit-study"
    - path: "commands/grd/validate-results.md"
      provides: "Correct study terminology in offer_next"
      contains: "audit-study"
    - path: "commands/grd/progress.md"
      provides: "Correct study terminology in Route D and F"
      contains: "complete-study"
  key_links:
    - from: "run-experiment.md"
      to: "audit-study.md"
      via: "Route B offer_next"
      pattern: "/grd:audit-study"
    - from: "progress.md"
      to: "new-study.md"
      via: "Route F"
      pattern: "/grd:new-study"
---

<objective>
Replace all milestone terminology with study equivalents in command chaining routes.

Purpose: Commands should route to study-based commands (audit-study, complete-study, new-study) rather than deprecated milestone commands (audit-milestone, complete-milestone, new-milestone) throughout the workflow.

Output: Three command files updated with consistent study terminology in their routing sections.
</objective>

<execution_context>
@~/.claude/get-research-done/workflows/execute-plan.md
@~/.claude/get-research-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md

Files to modify:
@commands/grd/run-experiment.md
@commands/grd/validate-results.md
@commands/grd/progress.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update run-experiment.md routes</name>
  <files>commands/grd/run-experiment.md</files>
  <action>
  In run-experiment.md, find the `<offer_next>` section and replace:
  - `/grd:audit-milestone` with `/grd:audit-study`
  - `/grd:complete-milestone` with `/grd:complete-study`

  These appear in Route B (milestone complete) around lines 196 and 204:
  - Line ~196: `/grd:audit-milestone` -> `/grd:audit-study`
  - Line ~204: `/grd:complete-milestone — skip audit, archive directly` -> `/grd:complete-study — skip audit, archive directly`
  </action>
  <verify>
  grep -n "audit-milestone\|complete-milestone" commands/grd/run-experiment.md
  Should return no matches.

  grep -n "audit-study\|complete-study" commands/grd/run-experiment.md
  Should return matches in Route B section.
  </verify>
  <done>run-experiment.md routes to audit-study and complete-study instead of milestone equivalents</done>
</task>

<task type="auto">
  <name>Task 2: Update validate-results.md routes</name>
  <files>commands/grd/validate-results.md</files>
  <action>
  In validate-results.md, find the `<offer_next>` section and replace:
  - `/grd:audit-milestone` with `/grd:audit-study`
  - `/grd:complete-milestone` with `/grd:complete-study`

  These appear in Route B (all tests pass, milestone complete) around lines 124 and 131:
  - Line ~124: `/grd:audit-milestone` -> `/grd:audit-study`
  - Line ~131: `/grd:complete-milestone — skip audit, archive directly` -> `/grd:complete-study — skip audit, archive directly`
  </action>
  <verify>
  grep -n "audit-milestone\|complete-milestone" commands/grd/validate-results.md
  Should return no matches.

  grep -n "audit-study\|complete-study" commands/grd/validate-results.md
  Should return matches in Route B section.
  </verify>
  <done>validate-results.md routes to audit-study and complete-study instead of milestone equivalents</done>
</task>

<task type="auto">
  <name>Task 3: Update progress.md routes</name>
  <files>commands/grd/progress.md</files>
  <action>
  In progress.md, find Route D and Route F sections and replace:
  - `/grd:complete-milestone` with `/grd:complete-study` (Route D, around line 305)
  - `/grd:new-milestone` with `/grd:new-study` (Route F, around line 336)

  Route D appears around line 292-315 (milestone complete).
  Route F appears around line 319-341 (between milestones).
  </action>
  <verify>
  grep -n "complete-milestone\|new-milestone" commands/grd/progress.md
  Should return no matches.

  grep -n "complete-study\|new-study" commands/grd/progress.md
  Should return matches showing the new routing.
  </verify>
  <done>progress.md routes to complete-study and new-study instead of milestone equivalents</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Verify no milestone terminology remains in routing:
   ```bash
   grep -r "audit-milestone\|complete-milestone\|new-milestone" commands/grd/*.md
   ```
   Should return no matches.

2. Verify study terminology is present:
   ```bash
   grep -l "audit-study" commands/grd/run-experiment.md commands/grd/validate-results.md
   grep -l "complete-study" commands/grd/run-experiment.md commands/grd/validate-results.md commands/grd/progress.md
   grep -l "new-study" commands/grd/progress.md
   ```
   All commands should match.

3. Requirements covered: CHAIN-02, CHAIN-03, CHAIN-04
</verification>

<success_criteria>
- [ ] run-experiment.md uses audit-study, complete-study (not milestone versions)
- [ ] validate-results.md uses audit-study, complete-study (not milestone versions)
- [ ] progress.md uses complete-study, new-study (not milestone versions)
- [ ] No stray milestone terminology in any modified file
- [ ] Git commit with all three files
</success_criteria>

<output>
After completion, create `.planning/phases/16-command-chaining-fixes/16-01-SUMMARY.md`
</output>
