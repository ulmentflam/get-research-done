---
phase: 20-gsd-sync-setup---exploration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/20-gsd-sync-setup---exploration/UPSTREAM_FEATURES.md
  - .planning/phases/20-gsd-sync-setup---exploration/CHERRY_PICK_DECISIONS.md
autonomous: true

must_haves:
  truths:
    - "Running `git fetch gsd-upstream` succeeds without errors"
    - "User can see list of new GSD features since fork with commit hashes"
    - "Cherry-pick decisions are documented with rationale for each feature"
    - "Gemini CLI commits are identified with file paths"
  artifacts:
    - path: ".planning/phases/20-gsd-sync-setup---exploration/UPSTREAM_FEATURES.md"
      provides: "Complete list of upstream commits and features since fork"
      contains: "git merge-base"
    - path: ".planning/phases/20-gsd-sync-setup---exploration/CHERRY_PICK_DECISIONS.md"
      provides: "Decision matrix for cherry-picking"
      contains: "CHERRY-PICK"
  key_links:
    - from: "git remote -v"
      to: "gsd-upstream"
      via: "remote add"
      pattern: "gsd-upstream.*get-shit-done"
    - from: "UPSTREAM_FEATURES.md"
      to: "CHERRY_PICK_DECISIONS.md"
      via: "feature identification"
      pattern: "commit hash"
---

<objective>
Establish GSD upstream remote and document all new features since GRD forked, creating a decision matrix for cherry-picking.

Purpose: Enable selective adoption of GSD features (especially Gemini CLI) without disrupting GRD's research-focused identity.
Output: Upstream remote configured, feature list documented, cherry-pick decisions recorded.
</objective>

<execution_context>
@/Users/evanowen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/evanowen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-gsd-sync-setup---exploration/20-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add GSD upstream remote and fetch</name>
  <files>None (git configuration)</files>
  <action>
Add the GSD upstream remote and fetch all branches:

1. Add remote pointing to GSD:
   ```bash
   git remote add gsd-upstream https://github.com/glittercowboy/get-shit-done.git
   ```

2. Fetch all upstream branches and commits:
   ```bash
   git fetch gsd-upstream
   ```

3. Verify remote configuration:
   ```bash
   git remote -v
   ```
   Should show both `origin` (GRD) and `gsd-upstream` (GSD).

4. Find and record the fork point:
   ```bash
   git merge-base main gsd-upstream/main
   ```

Note: If remote already exists (error "remote gsd-upstream already exists"), skip the add step and proceed to fetch.
  </action>
  <verify>
Run `git remote -v` and confirm `gsd-upstream` appears with `https://github.com/glittercowboy/get-shit-done.git`.
Run `git fetch gsd-upstream` and confirm it succeeds (returns 0 or shows "Fetching gsd-upstream").
  </verify>
  <done>
GSD upstream remote is configured and all upstream commits are fetched locally.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document upstream features since fork</name>
  <files>.planning/phases/20-gsd-sync-setup---exploration/UPSTREAM_FEATURES.md</files>
  <action>
Analyze the upstream GSD commits and document all new features:

1. Get the fork point:
   ```bash
   FORK_POINT=$(git merge-base main gsd-upstream/main)
   ```

2. List all commits since fork (excluding merges):
   ```bash
   git log --oneline --no-merges $FORK_POINT..gsd-upstream/main
   ```

3. Get detailed commit information for feature identification:
   ```bash
   git log --pretty=format:"%h | %an | %ad | %s" --date=short --no-merges $FORK_POINT..gsd-upstream/main
   ```

4. Find files changed since fork:
   ```bash
   git diff --name-status $FORK_POINT...gsd-upstream/main
   ```

5. Specifically search for Gemini-related commits:
   ```bash
   git log --grep="gemini\|Gemini" --no-merges --oneline gsd-upstream/main
   ```

6. Create UPSTREAM_FEATURES.md with:
   - Fork point commit hash
   - Total commits since fork (count)
   - Feature categories (group commits by type: Gemini, agents, workflows, bugfixes, etc.)
   - Key files changed
   - Notable PR/issue references from commit messages

Format as a structured markdown document with tables for easy reference.
  </action>
  <verify>
File exists at `.planning/phases/20-gsd-sync-setup---exploration/UPSTREAM_FEATURES.md`.
File contains fork point hash, commit count, and categorized features.
Gemini-related commits are identified with hashes.
  </verify>
  <done>
Complete inventory of upstream GSD features documented with commit hashes and file paths.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create cherry-pick decision matrix</name>
  <files>.planning/phases/20-gsd-sync-setup---exploration/CHERRY_PICK_DECISIONS.md</files>
  <action>
Create a decision matrix for each identified feature:

1. For each feature category in UPSTREAM_FEATURES.md, evaluate against GRD criteria:
   - Does it align with research workflows? (Yes = candidate)
   - Does it conflict with GRD branding? (Yes = skip or adapt)
   - Is it a universal improvement? (Yes = cherry-pick as-is)
   - Does it require adaptation? (Yes = cherry-pick + modify)

2. Create CHERRY_PICK_DECISIONS.md with these sections:

   ## Summary
   - Total features evaluated
   - Count to cherry-pick
   - Count to skip
   - Count requiring adaptation

   ## To Cherry-Pick (As-Is)
   | Feature | Commits | Files | Rationale |

   ## To Cherry-Pick (Adapt for GRD)
   | Feature | Commits | Files | Adaptation Needed | Rationale |

   ## To Skip
   | Feature | Commits | Rationale for Skipping |

   ## To Evaluate Later
   | Feature | Commits | Why Deferred |

3. For Gemini CLI specifically:
   - Identify all related commits
   - Note which files need GRD branding updates
   - Document the dependency chain (which commits must be applied in order)

4. Add a "Phase 21 Preparation" section listing:
   - Commits to cherry-pick first (ordered by dependency)
   - Expected conflicts based on file divergence
   - Testing plan after cherry-pick
  </action>
  <verify>
File exists at `.planning/phases/20-gsd-sync-setup---exploration/CHERRY_PICK_DECISIONS.md`.
File contains decision tables with rationale for each feature.
Gemini CLI commits are identified and ordered for cherry-picking.
File references commits from UPSTREAM_FEATURES.md.
  </verify>
  <done>
Cherry-pick decisions documented with clear rationale, commit order, and Phase 21 preparation notes.
  </done>
</task>

</tasks>

<verification>
1. `git remote -v` shows `gsd-upstream` pointing to `https://github.com/glittercowboy/get-shit-done.git`
2. `git fetch gsd-upstream` succeeds
3. UPSTREAM_FEATURES.md exists with categorized commit list
4. CHERRY_PICK_DECISIONS.md exists with decision tables
5. Gemini CLI commits are identified by hash
</verification>

<success_criteria>
- SYNC-01: GSD upstream added as git remote (verified by `git remote -v`)
- SYNC-02: GSD changelog/commits explored (UPSTREAM_FEATURES.md with complete inventory)
- SYNC-03: Features to cherry-pick identified and documented (CHERRY_PICK_DECISIONS.md with rationale)
- Gemini CLI location identified (commits and files documented for Phase 21)
</success_criteria>

<output>
After completion, create `.planning/phases/20-gsd-sync-setup---exploration/20-01-SUMMARY.md`
</output>
